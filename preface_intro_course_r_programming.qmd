---
title: "Preface + Intro + Intro R Programming"
author: "Halina Do-Linh"
toc: true
execute: 
  eval: false
format: html
editor: visual
---

# PREFACE

## Setup

-   Green + Pink stickies on tentcards
-   On whiteboards:
    -   WiFi + Password

    -   Course book: https://learning.nceas.ucsb.edu/2023-04-coreR/

    -   RStudio server: https://included-crab.nceas.ucsb.edu/

    -   Icebreaker (5 mins)

        -   Name + Pronouns + Current Position + Field of Study
        -   What part of the course are you most looking forward to?
        -   Find something you have in common that isn't professional or coding related!

    -   Social events:

        -   UCSB TidyTuesday Meetup (5-6:30PM) at M. Special Brewing Co. in Goleta (6860 Cortona Dr Building C, Goleta, CA 93117)
        -   NCEAS Terrace Happy Hour (4:30-5:30PM)
        -   SB First Thursdays (5-8PM)

## Key Messages / Lesson outline

-   Welcome to the coreR course!
-   Quick orientation from Ginger
-   Learning objectives
    -   Effectively manage data using tidy data practices and developing quality metadata
    -   Implement reproducible scientific workflows throughout all aspects of a project
    -   Build data visualizations and reusable reports using ggplot, markdown, and GitHub
    -   Increase your familiarity and confidence with R data science tools
-   **Schedule + Instructors / Icebreaker** introductions
    -   **Schedule**: No longer than 2 hr lesson chunks, then a break. Breaks will be 30 mins, and 1 hr for lunch
        -   14 topics
        -   3 R practice sessions where you'll be given a set of exercises to work on both individually and collaboratively
        -   Green = technical lessons; blue = non-technical lessons
        -   We'll be meeting from 9AM - 5PM each day except for Friday we'll break early at 12:30PM
        -   We also have some **social events** occurring this week that you're all invited to (point out on whiteboards):
            -   For those of you who have a car on Tuesday UCSB is hosting their TidyTuesday Meetup NCEAS Happy Hour on the terrace (we're happy to connect you with NCEAS folks)
            -   NCEAS Happy Hour on the terrace (we're happy to connect you with NCEAS folks)
            -   SB First Thursdays
    -   Icebreaker (Camila and I demonstrate)
    -   Me, Camila
    -   Who you'll meet later:
        -   Sam
        -   Daphne
-   **NCEAS code of conduct** (open in new tab)
    -   Listed here is our expected behaviors
    -   if you see anyone not following these expectations please either:
        -   call 911 if it's a dangerous situation that requires immediate help
        -   if not in immediate danger please report to:
            -   one of the instructors (us)
            -   our deputy director Courtney Scarborough whose office is the second one on the right hand side
            -   directly to UCSB
            -   UCSB's office of ombuds which provides support through informal and confidential consultations
-   Any questions about the plan for the week, the NCEAS building, our code of conduct, reporting or any other course logistics? Anything to add?

## Transition

-   Great! Thank you all so much for participating in the course and for abiding by our community rules for this week. Let's get started with the course.

**Time check / end time: 9:20 AM**

------------------------------------------------------------------------

# RSTUDIO SERVER SETUP

## Setup

-   WiFi connection
-   included-crab link
-   RStudio Server account password reset

## Key messages / Lesson outline

-   We're working in an RStudio sever so that everyone is working in the same environment

    -   helps with troubleshooting
    -   prevents errors

-   Everyone connected to the WiFi?

-   Did everyone successful reset their password for their NCEAS RStudio server account?

    -   If not, Camila can help or we can get additional help from Thomas our IT + Hardware guy

-   **Everyone login to included-crab** the name of our RStudio Server

    -   once you've successfully logged in please put up a green sticky

-   **Let's make our first R Project**

    -   An R Project is tied to a directory on your local computer, and makes organizing your work and collaborating with others easier
    -   Aka it it bundles all your work within a working directory (we'll come back to what a working directory is in a second)
    -   using an R project is a reproducible research best practice
        -   consider your current workflow:
            -   how many different software programs do you use? What do you use them for?
            -   The power of RStudio and R programming is that you can very likely consolidate your workflow using just R and RStudio.
        -   **Follow along with me** as I make an R Project and you can always refer to the steps in the green box or ask Camila for help

-   **Now let's organize our R Project**

    -   Now that we have our R Project set up we want to create some relevant directories or folders for our project
    -   There are some packages in R that will create a directory or folder structure for you and Camila will actually demonstrate this on Friday with the package `rrtools`
    -   The goal is to organize your project so that it is a compendium of your research.
    -   This means that the project has all of the digital parts needed to replicate your analysis, like code, figures, the manuscript, and data access.
    -   Some common directories are:
        -   data: where we store our data (often contains subdirectories for raw, processed, and metadata data)
        -   R: contains scripts for cleaning or wrangling, etc. (some find this name misleading if their work has other scripts beyond the R programming language, in which case they call this directory scripts)
        -   plots or figs: generated plots, graphs, and figures
        -   docs: summaries or reports of analysis or other relevant project information
    -   We're going to create a data, R, and figs directories which we will populate with different files throughout the week.
    -   Follow me on how to make a new folder. When you've created those three folders go ahead and put up a green sticky

-   **Let's talk about how to move in our project**

    -   We've created these new directories but how do we tell our code to access the files within those directories? Aka how do we move within a project. We do this using paths.
    -   There are two types of paths in computing: absolute and relative paths
    -   An absolute path always starts with the root of your file system and locates files from there. The absolute path to my project directory is: /home/do-linh/training_do-linh
    -   Relative paths start from some location in your file system that is below the root, and starts in our working directory. RStudio projects automatically set the working directory to the directory of the project or where the `.Rproj` file is.
    -   This means instead of accessing data from my root I can use a shorter path using my working directory or my relative path.
    -   Using relative paths is not only convenient but also makes our code more reproducible and when we're collaborting
    -   For example, if I am reading in data using an absolute file path and my collaborator also wants to read in that data they wouldn't be able to because my absolute path doesn't exist in their local computer

## Transition

Any questions about absolute or relative paths? Great! Let's move onto `Git` and GitHub setup.

# `GIT` AND GITHUB SETUP

## Setup

-   GitHub account

## Key messages / Lesson outline

-   Was everyone able to successfully create a GitHub account?

-   Before using Git, you need to tell it who you are, also known as setting the global options. The only way to do this is through the command line.

-   Make sure you have a terminal window open and if not do this: Tools \> Terminal \> New Terminal

-   Now let's set some global options in our gitconfig file

    -   First let's set our username. This needs to match exactly to your username on github `git config --global user.name "hdolinh"`
    -   Next let's set our email. Same thing, make sure this matches exactly to your account on github `git config --global user.email "dolinh@nceas.ucsb.edu"`
    -   Next, we will set our credentials to not time out for a very long time. This is due to how our server handles credentials - not doing this will make your Personal Access Token (which we will set up soon) expire immediately on the system, even though it is actually valid for a month. `git config --global credential.helper 'cache --timeout=10000000'`
    -   Next, we will set the default branch name to main for any new repositories that are created moving forward. Why are we doing this? Previously, the default branch name was master and this racist terminology for git branches motivates us to update our default branch to main instead. `git config --global init.defaultBranch main`
    -   Finally, check to make sure everything looks correct `git config --global --list`
    -   Does everyone's credentials and global settings look correct? If not go ahead and reset them using the commands above

-   Now we'll be authenticating our GitHub account using a Personal Access Token or PAT for short.

-   Follow along with me and there are the steps written out if you need them in the book

-   First make sure you're in the Console now then run `usethis::create_github_token()`

-   A new browser window should open up to GitHub, showing all the scopes options. You can review the scopes, but you don't need to worry about which ones to select this time. Using `create_github_token()` automatically pre-selects some recommended scopes. Go ahead and scroll to the bottom and click "Generate Token".

-   Back in RStudio, run `gitcreds::gitcreds_set()` in the Console

-   Paste your PAT

-   Then run `usethis::git_sitrep()` and check

## Transition

Does everything look correct? Perfect! Let's get started with our first lesson in programming in R

**Time check / end time: 10:00 AM**

------------------------------------------------------------------------

# WHY R PROGRAMMING?

## Setup

- Make sure you're in your `training_{USERNAME}` R project

## Welcome to R Programming

Before we start I wanna share that we are all learners in the room. It’s important to know and understand that everyone here has different experiences and perspectives that brings valueable contributions to discussions and coding we’ll be doing throughout this week

In this session we’ll be going over a lot of concepts so please use the stickies, use your arms, your voice - whatever you need to get my attention to get clarity on a concept or anything we discuss today. All these concepts build on top of each other so it’s important you understand them as we get further into the content. Ok so what we’ll be going over today includes:

### Learning Objectives {.unnumbered}

-   Get oriented with the RStudio interface
-   Run code and basic arithmetic in the Console
-   Practice writing code in an R Script
-   Be introduced to built-in R functions
-   Use the Help pages to look up function documentation

So what is the difference between R and RStudio? Here is an analogy to start us off. 

If you were a chef, R is a spoon or a tool you use to prepare the food you are trying to cook. So think of R as a tool that you’ll use to accomplish your task. 

And if R is the spoon, then Rstudio is the kitchen. Rstudio provides you a place to do your work, allows you to collaborate with others, and ultimately makes your life easier by bringing together all the tools you need to use for your research in one place. Making it a powerful tool for research and analysis. 

Again, our goal for this course is to not only introduce you to R programming concepts, but to grow your intuition so that no matter what analysis you’re trying to run or error you’re trying to debug, you have an idea of what questions to ask and where to start. 

## RStudio IDE

Let's take a tour of the RStudio interface.

We see three panes, technically there are four but we won’t reveal the fourth pane until a little bit later.

On the left hand side we see the console. The console is where R code runs and where it will show you the results of the code or commands you’ve written out. We can run code directly in the console, which we will do together in just a bit, but I want to emphasize that while there situations where you’ll run code in the console, you should not run the majority of your code in the console because it won’t be saved. 

On the right side we see the Environment / History pane at the top. The Environment tab is empty now, but when we create variables or rather objects in R, import data, and more we will see those data objects appear here. The Environment tab is one I look at often when I code because it shows you all the data objects that are active in my current working session. The History tab is also empty right now but it will show you the history of the commands you have used in the current working session.

In the lower right pane, we see multiple tabs. The Files/Plots/Help pane does a lot, but for now understand that the Files pane shows your file folder system so you can see what files and folders you are working in. If you were to create a plot, it will show up in the Plot tab which is a viewer. The Help tab is very helpful and with it you can look up any function or package in R, and look at the documentation about those functions and packages. It can be a little daunting looking at a help page, so we’ll go over it in more depth later in this session. And packages will show you the list of packages available to you. 

When you first open RStudio it’s always important to ask yourself where am I? Luckily this is easy to answer by looking at the top left corner of the console pane. You can see too that the Files pane in the lower right shows what is in the Home directory where you are. You can navigate around within that Files pane and explore, but note that you won’t change where you are: even as you click through you’ll still be Home:~/


## Coding in the Console

We can run code in a couple of places in RStudio, including the Console, let's start there.

At it's most basic, we can use R as a calculator, let's try a couple of examples in the console.

```{r}
#| eval: false
# run in the console
# really basic examples
3*4
3+4
3-4
3/4
```

We're going to continue writing code in the Console for now, but we'll code in an R Script in just a bit so we can save our code.

::: {.callout-caution icon="false"}
#### Quick Tip

When you're in the console you'll see a greater than sign (`>`) at the start of a line. This is called the "prompt" and when we see it, it means R is ready to accept commands. If you see a plus sign (`+`) in the Console, it means R is waiting on additional information before running. You can always press escape (`esc`) to return to the prompt. Try practicing this by running `3*` (or any incomplete expression) in the console.
:::

### Objects in R

Let's say the value of 12 that we got from running `3*4` is a really important value we need to keep. To keep information in R, we need to create an **object**. The way information is stored in R is through objects.

We can assign a value of a mathematical operation (and more!) to an object in R using the assignment operator, `<-` (greater than sign and minus sign). All objects in R are created using the assignment operator, following this form: `object_name <- value`.

::: callout-note
#### Exercise: Create an object

Assign `3*4` to an object called `important_value` and then inspect the object you just created.
:::

```{r}
# think of this code as someone saying "important_value gets 12".
important_value <- 3*4
```

Notice how after creating the object, R doesn't print anything. However, we know our code worked because we see the object, and the value we wanted to store is now visible in our **Global Environment**. We can force R to print the value of the object by calling the object name (aka typing it out) or by using parentheses.

::: {.callout-caution icon="false"}
#### Quick Tip

When you begin typing an object name RStudio will automatically show suggested completions for you that you can select by hitting `tab`, then press `return`.
:::

```{r}
# printing the object by calling the object name
important_value
# printing the object by wrapping the assignment syntax in parentheses
(important_value <- 3*4)
```

::: {.callout-caution icon="false"}
#### Quick Tip

When you're in the Console use the up and down arrow keys to call your command history, with the most recent commands being shown first.
:::

### Naming Conventions

Before we run more calculations, let's talk about naming objects. For the object, `important_value` we used an underscore to separate the object name. This naming convention is called **snake case**. There are other naming conventions including, but not limited to:

-   we_used_snake_case

-   someUseCamelCase

-   SomeUseUpperCamelCaseAlsoCalledPascalCase

Choosing a naming convention is a personal preference, but once you choose one - be consistent! A consistent naming convention will increase the readability of your code for others and your future self.

## Running code in an R Script

So far we've been running code in the Console, let's try running code in an R Script. An R Script is a simple text file. RStudio uses an R Script by copying R commands from text in the file and pastes them into the Console as if you were manually entering commands yourself.

::: callout-tip
### Creating an R Script

1.  From the "File" menu, select "New File"
2.  Click "R Script" from the list of options

RStudio should open your R Script automatically after creating it. Notice a new pane appears above the Console. This is called the **Source pane** and is where we write and edit R code and documents. This pane is only present if there are files open in the editor.

3.  Save the R Script as `intro-to-programming.R`
:::

### How to run code in an R Script

Running code in an R Script is different than running code in the Console (aka you can't just press `return` / `enter`). To interpret and run the code you've written, R needs you to send the code from the script (or editor) to the Console. Some common ways to run code in an R Script include:

1.  Place your cursor on the line of code you want to run and use the shortcut `command` + `return` or click the `Run` button in the top right of the Source pane.

2.  Highlight the code you want to run, then use the shortcut `command` + `return` or click the `Run` button.

### R calculations with objects

So we know that objects are how R stores information, and we know we create objects using the assignment operator `<-`. Let's build upon that and learn how to use an object in calculations.

Imagine we have the weight of a dog in kilograms. Create the object `weight_kg` and assign it a value of 55.

```{r}
# weight of a dog in kilograms
weight_kg <- 55 
```

Now that R has `weight_kg` saved in the Global Environment, we can run calculations with it.

::: callout-note
#### Exercise: Using `weight_kg` run a simple calculation

Let's convert the weight into pounds. Weight in pounds is 2.2 times the weight in kg.
:::

```{r}
# converting weight from kilograms to pounds
2.2 * weight_kg
```

You can also store more than one value in a single object. Storing a series of weights in a single object is a convenient way to perform the same operation on multiple values at the same time. One way to create such an object is with the function `c()`, which stands for combine or concatenate.

First let's create a **vector** of weights in kilograms using `c()` (we'll talk more about vectors in the next section, [Data structures in R](#data_structures)).

```{r}
# create a vector of weights in kilograms
weight_kg <- c(55, 25, 12)
# call the object to inspect
weight_kg
```

Now convert the vector `weight_kg` to pounds.

```{r}
# covert `weight_kg` to pounds 
weight_kg * 2.2
```

Wouldn't it be helpful if we could save these new weight values we just converted? This might be important information we may need for a future calculation. How would you save these new weights in pounds?

```{r}
# create a new object 
weight_lb <- weight_kg * 2.2
# call `weight_lb` to check if the information you expect is there
weight_lb
```

::: {.callout-caution icon="false"}
#### Quick Tip

You will make many objects and the assignment operator `<-` can be tedious to type over and over. Instead, use **RStudio's keyboard shortcut: `option` + `-` (the minus sign)**.

Notice that RStudio automatically surrounds `<-` with spaces, which demonstrates a useful code formatting practice. Code is miserable to read on a good day. Give your eyes a break and use spaces.

RStudio offers many handy [keyboard shortcuts](https://support.rstudio.com/hc/en-us/articles/200711853-Keyboard-Shortcuts). Also, `option`+`Shift`+`K` brings up a keyboard shortcut reference card.

For more RStudio tips, check out Master of Environmental Data Science (MEDS) workshop: [IDE Tips & Tricks](https://ucsb-meds.github.io/IDE-tips-and-tricks/#/title-slide).
:::

## Data types in R

Data type is a particular kind of data item, as defined by the values it can take,

| Data Type                         | Definition                                                                                                                                                                                                                             |
|-----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `boolean` (also called `logical`) | Data take on the value of either `TRUE`, `FALSE`, or `NA`. `NA` is used to represent missing values.                                                                                                                                   |
| `character`                       | Data are string values. You can think of character strings as something like a word (or multiple words). A special type of character string is a `factor`, which is a string but with additional attributes (like levels or an order). |
| `integer`                         | Data are whole numbers (those numbers without a decimal point). To explicitly create an integer data type, use the suffix `L` (e.g. `2L`).                                                                                             |
| `numeric` (also called `double`)  | data are numbers that contain a decimal.                                                                                                                                                                                             |
: Common data types in R {tbl-colwidths="[25,75]"}


| Data Type | Definition                                              |
|-----------|---------------------------------------------------------|
| `complex` | Data are complex numbers with real and imaginary parts. |
| `raw`     |  Data are raw bytes.                                    |

: Less common data types (we won't be going into these data types this course) {tbl-colwidths="[25,75]"}

We've been using primarily `integer` or `numeric` data types so far. Let's create an object that has a string value or a `character` data type.

```{r}
science_rocks <- "yes it does!"
```

"yes it does!" is a string, and R knows it's a word and not a number because it has quotes `" "`. You can work with strings in your data in R easily thanks to the [`stringr`](http://stringr.tidyverse.org/) and [`tidytext`](https://github.com/juliasilge/tidytext) packages.

**This lead us to an important concept in programming:** As we now know, there are different "classes" or types of objects in R. The operations you can do with an object will depend on what type of object it is because each object has their own specialized format, designed for a specific purpose. This makes sense! Just like you wouldn't do certain things with your car (like use it to eat soup), you won't do certain operations with character objects (strings).

Also, everything in R is an object. An object is a variable, function, data structure, or method that you have written to your environment.

Try running the following line in your script:

```{r}
#| eval: false
"Hello world!" * 3
```

What happened? What do you see in the Console? Why?

::: {.callout-caution icon="false"}
### Quick Tip

You can see what data type or class an object is using the `class()` function, or you can use a logical test such as: `is.numeric()`, `is.character()`, `is.logical()`, and so on.

```{r}
#| eval: false
class(science_rocks) # returns character
is.numeric(science_rocks) # returns FALSE
is.character(science_rocks) # returns TRUE
```
:::

## Data structures in R {#data_structures}

Okay, now let's talk about vectors.

**A vector is the most common and most basic data structure in R**. Vectors can be thought of as a way R stores a collection of values or elements. Think back to our `weight_lb` vector. That was a vector of  three elements each with a data type or class of `numeric`.

Vectors are foundational for other data structures in R, including data frames, and while we won't go into detail about other data structures there are great resources online that do. We recommend the chapter [Vectors](https://adv-r.hadley.nz/vectors-chap.html) from the online book [Advanced R](https://adv-r.hadley.nz/index.html) by Hadley Wickham.


## R Functions

So far we've learned some of the basic syntax and concepts of R programming, and how to navigate RStudio, but we haven't done any complicated or interesting programming processes yet. This is where functions come in!

**A function is a way to group a set of commands together to undertake a task in a reusable way.** When a function is executed, it produces a return value. We often say that we are "calling" a function when it is executed.

**All functions are called using the same syntax:** function name with parentheses around what the function needs in order to do what it was built to do. These "needs" are pieces of information called arguments, and are required to return an expected value.

::: {.callout-caution icon=false}
### Syntax of a function will look something like:

```result_value <- function_name(argument1 = value1, argument2 = value2, ...)```
:::

Before we use a function, let's talk about Help pages.

## Getting help using help pages

What if you know the name of the function that you want to use, but don't know exactly how to use it? Thankfully RStudio provides an easy way to access the help documentation for functions.

The next function we're about to use is the `mean()` function. 

To access the help page for `mean()`, enter the following into your console:

```{r}
#| eval: false
?mean
```

The Help pane will show up in the lower right hand corner of your RStudio.

The Help page is broken down into sections:

-   Description: An extended description of what the function does.
-   Usage: The arguments of the function(s) and their default values.
-   Arguments: An explanation of the data each argument is expecting.
-   Details: Any important details to be aware of.
-   Value: The data the function returns.
-   See Also: Any related functions you might find useful.
-   Examples: Some examples for how to use the function.

## Examples using built-in R functions `mean()` and `read.csv()`

### Use the `mean()` function to run a more complex calculation

Let's override our weight object with some new values, and this time we'll assign it three dog weights in pounds:

```{r}
weight_lb <- c(55, 25, 12)
```

::: callout-note
#### Exercise: Use the `mean()` function to calculate the mean weight.
From the its Help page, we learned this function will take the mean of a set of numbers. Very convenient! 

We also learned that `mean()` only has one argument we need to supply a value to (`x`). The rest of the arguments have default values.
:::

```{r}
mean(x = weight_lb)
```

::: callout-note
#### Exercise: Save the mean to an object called `mean_weight_lb`
**Hint:** What operator do we use to save values to an object?
:::

```{r}
# saving the mean using the assignment operator `<-`
mean_weight_lb <- mean(x = weight_lb)
```

::: callout-note
#### Exercise: Update `weight_lb`
Let's say each of the dogs gained 5 pounds and we need to update our vector, so let's change our object's value by assigning it new values.
:::

```{r}
weight_lb <- c(60, 30, 17)
```

Call `mean_weight_lb` in the console or take a look at your Global Environment. Is that the value you expected? Why or why not?

It wasn't the value we expected because `mean_weight_lb` did not change. This demonstrates an important programming concept: **Assigning a value to one object does not change the values of other objects.**

Now, that we understand why the object's value hasn't changed - how do we update the value of `mean_weight_lb`? How is an R Script useful for this?

This lead us to another important programming concept, specifically for R Scripts: **An R Script runs top to bottom.**

This order of operations is important because if you are running code line by line, the values in object may be unexpected. When you are done writing your code in an R Script, it's good practice to clear your Global Environment and use the `Run` button and select "Run all" to test that your R Script successfully runs top to bottom.

### Use the `read.csv()` function to read a file into R

So far we have learned how to assign values to objects in R, and what a function is, but we haven't quite put it all together yet with real data yet. To do this, we will introduce the function `read.csv()`, which will be in the first lines of many of your future scripts. It does exactly what it says, it reads in a csv file to R.

Since this is our first time using this function, first access the help page for `read.csv()`. This has a lot of information in it, as this function has a lot of arguments, and the first one is especially important - we have to tell it what file to look for. Let's get a file!

::: callout-tip
#### Download a file from the Arctic Data Center

1.  Navigate to this dataset by Craig Tweedie that is published on the Arctic Data Center. [Craig Tweedie. 2009. North Pole Environmental Observatory Bottle Chemistry. Arctic Data Center. doi:10.18739/A25T3FZ8X.](http://doi.org/10.18739/A25T3FZ8X)
2.  Download the first csv file called `BGchem2008data.csv` by clicking the "download" button next to the file.
3.  Move this file from your `Downloads` folder into the `data` directory we created in our R Project `training_{USERNAME}`.
:::

Now we have to tell `read.csv()` how to find the file. We do this using the `file` argument which you can see in the usage section in the help page. In R, you can either use absolute paths (which will start with your home directory `~/`) or paths **relative to your current working directory.** RStudio has some great auto-complete capabilities when using relative paths, so we will go that route. 

Assuming you have moved your file to a folder within `training_{USERNAME}` called `data`, and your working directory is your project directory (`training_{USERNAME}`) your `read.csv()` call will look like this:

```{r}
#| eval: false

# reading in data using relative paths
# note that we only need to specify one arguement bc the rest have default values
bg_chem_dat <- read.csv(file = "data/BGchem2008data.csv")
```

You should now have an object of the class `data.frame` in your environment called `bg_chem_dat`. Check your environment pane to ensure this is true. Or you can check the class using the function `class()` in the console.

If we wanted to add another argument, say `stringsAsFactors`, we need to specify it explicitly using the `name = value` pair, since the second argument is `header` and because it has a default value. 

Many R users (including myself) will override the default `stringsAsFactors` argument using the following call:

```{r}
#| eval: false

# relative file path
bg_chem_dat <- read.csv("data/BGchem2008data.csv", 
                    stringsAsFactors = FALSE)
# absolute file path
bg_chem_dat <- read.csv("Documents/arctic_training_files/data/BGchem2008data.csv",
                    stringsAsFactors = FALSE)
```

## Working with data frames in R using the Subset Operator `$`

A `data.frame` is a two dimensional data structure in R that mimics spreadsheet behavior. 

It is a collection of rows and columns of data, where each column has a name and represents a variable, and each row represents an observation containing a measurement of that variable. 

When we ran `read.csv()`, the object `bg_chem_dat` that we created is a `data.frame`. There are many ways R and RStudio help you explore data frames. Here are a few, give them each a try:

-   Click on the word `bg_chem_dat` in the environment pane
-   Click on the arrow next to `bg_chem_dat` in the environment pane
-   Execute `head(bg_chem_dat)` in the Console
-   Execute `View(bg_chem_dat)` in the Console

Usually we will want to run functions on individual columns in a `data.frame`. To call a specific column, we use the list subset operator `$`. 

Say you want to look at the first few rows of the `Date` column only: 

```{r}
#| eval: false
head(bg_chem_dat$Date)
```

You can also use the subset operator `$` calculations. For example, let's calculated the mean temperature of all the CTD samples.

```{r}
#| eval: false
mean(bg_chem_dat$CTD_Temperature)
```

You can also save this calculation to an object using the subset operator `$`. 

```{r}
#| eval: false
mean_temp <- mean(bg_chem_dat$CTD_Temperature)
```

## Error messages are your friends

There is an implicit contract with the computer/scripting language: Computer will do tedious computation for you. In return, you will be completely precise in your instructions. Typos matter. Case matters. Pay attention to how you type.

Remember that this is a language, not dissimilar to English! There are times you aren't understood -- it's going to happen. There are different ways this can happen. Sometimes you'll get an error. This is like someone saying 'What?' or 'Pardon'? Error messages can also be more useful, like when they say 'I didn't understand this specific part of what you said, I was expecting something else'. That is a great type of error message. Error messages are your friend. Google them (copy-and-paste!) to figure out what they mean. Note that knowing how to Google is a skill and takes practice - use our [Masters of Environmental Data Science](https://bren.ucsb.edu/masters-programs/master-environmental-data-science) (MEDS) program workshop [Teach Me How to Google](https://ucsb-meds.github.io/teach-me-how-to-google/#1) as a guide.

::: {layout-ncol=2}
![](images/practicalDev_googleErrorMessage.jpg){width="30%"}

[![](images/meds-teach-me-how-to-google-cover.png){width="50%"}](https://github.com/UCSB-MEDS/teach-me-how-to-google)
:::

And also know that there are errors that can creep in more subtly, without an error message right away, when you are giving information that is understood, but not in the way you meant. Like if I'm telling a story about tables and you're picturing where you eat breakfast and I'm talking about data. This can leave me thinking I've gotten something across that the listener (or R) interpreted very differently. And as I continue telling my story you get more and more confused... So write clean code and check your work as you go to minimize these circumstances!

## R Packages

![Artwork by Allison Horst](images/allison-horst-r-doorway.png){width="80%" fig-align="center"}

R packages are the building blocks of computational reproducibility in R. Packages may contain code, functions, data and documentation in a standarized collection format that can be installed. 

Most packages are in the Comprehensive R Archive Network (CRAN) which is the main package repository for R. 

There are thousands of community-maintained packages out there for just about every imaginable use of R - including many that you have probably never thought of!

## R Resources

+----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Learning R Resources | -   [Introduction to R](http://www.datacarpentry.org/R-ecology-lesson/01-intro-to-r.html) lesson in [Data Carpentry's R for data analysis](http://www.datacarpentry.org/R-ecology-lesson/) course |
|                      | -   Jenny Bryan's Stat 545 [course materials](https://stat545.com/r-basics.html)                                                                                                                  |
|                      | -   [Julie Lowndes' Data Science Training for the Ocean Health Index](http://ohi-science.org/data-science-training/)                                                                              |
|                      | -   Learn R in the console with [swirl](https://swirlstats.com/)                                                                                                                                  |
|                      | -   [Programming in R](http://ohi-science.org/data-science-training/programming.html)                                                                                                             |
|                      | -   [R, RStudio, RMarkdown](http://ohi-science.org/data-science-training/rstudio.html)                                                                                                            |
+----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Community Resources  | -   [NCEAS' EcoDataScience](https://eco-data-science.github.io/)                                                                                                                                  |
|                      |                                                                                                                                                                                                   |
|                      | -   [R-Ladies](https://rladies.org/)                                                                                                                                                              |
|                      |                                                                                                                                                                                                   |
|                      | -   [rOpenSci](https://ropensci.org/community/)                                                                                                                                                   |
|                      |                                                                                                                                                                                                   |
|                      | -   [Minorities in R (MiR)](https://mircommunity.com/)                                                                                                                                            |
|                      |                                                                                                                                                                                                   |
|                      | -   Twitter - there is *a lot* here but some hashtags to start with are:                                                                                                                          |
|                      |                                                                                                                                                                                                   |
|                      |     -   #rstats                                                                                                                                                                                   |
|                      |                                                                                                                                                                                                   |
|                      |     -   #TidyTuesday                                                                                                                                                                              |
|                      |                                                                                                                                                                                                   |
|                      |     -   #dataviz                                                                                                                                                                                  |
+----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Cheatsheets          | -   [Base R Cheatsheet](https://iqss.github.io/dss-workshops/R/Rintro/base-r-cheat-sheet.pdf)                                                                                                     |
|                      | -   [LaTeX Equation Formatting](https://www.caam.rice.edu/~heinken/latex/symbols.pdf)                                                                                                             |
|                      | -   [MATLAB/R Translation Cheatsheet](http://mathesaurus.sourceforge.net/octave-r.html)                                                                                                           |
+----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

: Awesome R Resources to Check out {tbl-colwidths="[20,80]"}

## Bonus Content

### Clearing the environment

Take a look at the objects in your Environment (Workspace) in the upper right pane. The Workspace is where user-defined objects accumulate. There are a few useful commands for getting information about your Environment, which make it easier for you to reference your objects when your Environment gets filled with many, many objects.

![](images/RStudio_IDE_env.png)

You can get a listing of these objects with a couple of different R functions:

```{r}
objects()
ls()
```

If you want to remove the object named `weight_kg`, you can do this:

```{r}
rm(weight_kg)
```

To remove everything (or click the Broom icon in the Environment pane):

```{r}
rm(list = ls())
```

::: {.callout-caution icon="false"}
#### Quick Tip

It's good practice to clear your environment. Over time your Global Environmental will fill up with many objects, and this can result in unexpected errors or objects being overridden with unexpected values. Also it's difficult to read / reference your environment when it's cluttered!
:::

### Logical operators and expressions

We can ask questions about an object using **logical operators and expressions**. Let's ask some "questions" about the `weight_lb` object we made.

-   `==` means 'is equal to'
-   `!=` means 'is not equal to'
-   `<` means 'is less than'
-   `>` means 'is greater than'
-   `<=` means 'is less than or equal to'
-   `>=` means 'is greater than or equal to'

```{r}
# examples using logical operators and expressions
weight_lb == 2
weight_lb >= 30
weight_lb != 5
```


## Transition

-   Time for break! We'll break for 30 mins now and meet back at 11:30AM. After the break Camila will be leading us through an introduction to R Markdown

**Time check / end time: 11:00 AM**
